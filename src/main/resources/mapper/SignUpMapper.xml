<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.moodmix.mapper.SignUpMapper">

    <insert id="SignUp" parameterType="map">
        <if test="userId == null or userPassword == null or userName == null or userBirth == null">
            <!-- 하나라도 null 값이 있으면 예외를 던짐 / 중복 check -->
            <![CDATA[
            SELECT 1 / 0 FROM DUAL
        ]]>
        </if>
        INSERT INTO users(user_id, user_password, user_name, user_birth)
        SELECT
        #{userId},
        #{userPassword},
        #{userName},
        #{userBirth}
        FROM dual
        WHERE NOT EXISTS (
        SELECT user_id
        FROM users
        WHERE user_id = #{userId}
        )
    </insert>
</mapper>
